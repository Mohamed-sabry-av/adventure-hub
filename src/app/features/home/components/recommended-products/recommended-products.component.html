<section class="recommended-products py-8 px-4">
  <div class="container mx-auto">
    <div class="section-header flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold">Recommended For You</h2>
    </div>

    @if (loading) {
    <div class="flex justify-center py-8">
      <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-900"></div>
    </div>
    }

    @if (error) {
    <div class="bg-red-100 text-red-700 p-4 mb-4 rounded">{{ error }}</div>
    }

    @if (!loading && !error && products.length > 0) {
    <div class="products-carousel overflow-hidden relative">
      <owl-carousel-o #owlCarousel [options]="carouselOptions">
        @for (product of products; track product.id) {
        <ng-template carouselSlide [id]="product.id">
          <div class="px-2">
            <app-product-card [product]="product"></app-product-card>
          </div>
        </ng-template>
        }
      </owl-carousel-o>

      <!-- Custom Navigation Arrows -->
      <div class="custom-navigation hidden md:block">
        <button class="nav-btn prev-btn" aria-label="Previous slide">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M15 18l-6-6 6-6"></path>
          </svg>
        </button>
        <button class="nav-btn next-btn" aria-label="Next slide">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 18l6-6-6-6"></path>
          </svg>
        </button>
      </div>
    </div>
    }

    @if (!loading && !error && products.length === 0) {
    <div class="text-center py-8 bg-gray-100 rounded-lg">
      <p class="text-gray-600">No recommendations available at the moment.</p>
    </div>
    }
  </div>
</section>