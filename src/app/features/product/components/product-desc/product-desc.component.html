<div class="product-description" *ngIf="productAdditionlInfo()">
  <!-- Sticky Navigation -->
  <div class="sticky-tabs">
    <div class="description-tabs">
      <div class="tab-item" [class.active]="activeSection === 'description'" (click)="scrollToSection('description')">
        Description
      </div>
      <div class="tab-item" [class.active]="activeSection === 'additional-info'"
        (click)="scrollToSection('additional-info')">
        Additional information
      </div>
      <div class="tab-item" [class.active]="activeSection === 'reviews'" (click)="scrollToSection('reviews')">
        Reviews <span class="review-count" *ngIf="reviewCount > 0">{{ reviewCount }}</span>
      </div>
    </div>
  </div>

  <!-- Content Sections -->
  <div class="tab-sections">
    <!-- Description Section -->
    <div id="description" class="content-section">
      <h2 class="section-header">Description</h2>

      <!-- Initial text -->
      <div class="description-section" *ngIf="descriptionSections.length && descriptionSections[0].text">
        <div class="text-content" [innerHTML]="descriptionSections[0].text"></div>
      </div>

      <!-- Image-Text Sections -->
      <div *ngFor="let section of descriptionSections.slice(1)" class="image-text-section"
        [class.left-align]="section.align === 'left'" [class.right-align]="section.align === 'right'">
        <div class="section-image" *ngIf="section.image">
          <img [src]="section.image" [alt]="section.title || 'Product feature'" loading="lazy">
        </div>
        <div class="section-content">
          <h3 *ngIf="section.title" class="section-title">{{ section.title }}</h3>
          <div class="section-text" *ngIf="section.text" [innerHTML]="section.text"></div>
        </div>
      </div>

      <!-- If no structured content is available, show raw description -->
      <div *ngIf="!descriptionSections.length" class="raw-description" [innerHTML]="productAdditionlInfo().description">
      </div>

      <!-- Specifications -->
      <div class="specifications" *ngIf="productSpecs.length > 0">
        <h3 class="specs-header">Specifications</h3>
        <div class="specs-list">
          <div class="spec-item" *ngFor="let spec of productSpecs">
            <span class="spec-label">{{ spec.key }} :</span>
            <span class="spec-value">{{ spec.value }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Additional Information Section -->
    <div id="additional-info" class="content-section">
      <h2 class="section-header">Additional information</h2>
      <div class="additional-info-content">
        <table class="info-table">
          <tbody>
            <!-- Brand -->
            <tr *ngIf="productAdditionlInfo().brand">
              <th>Brand</th>
              <td>{{ productAdditionlInfo().brand }}</td>
            </tr>

            <!-- Colors -->
            <tr *ngIf="productAdditionlInfo().available_colors && productAdditionlInfo().available_colors.length > 0">
              <th>Color</th>
              <td class="color-list">
                <span *ngFor="let color of productAdditionlInfo().available_colors; let last = last">
                  {{ color }}{{ !last ? ', ' : '' }}
                </span>
              </td>
            </tr>

            <!-- Sizes -->
            <tr *ngIf="productAdditionlInfo().available_sizes && productAdditionlInfo().available_sizes.length > 0">
              <th>Size</th>
              <td class="size-list">
                <span *ngFor="let size of productAdditionlInfo().available_sizes; let last = last">
                  {{ size }}{{ !last ? ', ' : '' }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- If no additional information available -->
      <div *ngIf="!productAdditionlInfo().brand &&
                 !(productAdditionlInfo().available_colors && productAdditionlInfo().available_colors.length > 0) &&
                 !(productAdditionlInfo().available_sizes && productAdditionlInfo().available_sizes.length > 0)"
        class="no-info">
        <p>No additional information available for this product.</p>
      </div>
    </div>

    <!-- Reviews Section -->
    <div id="reviews" class="content-section">
      <h2 class="section-header">Reviews</h2>
      <div class="reviews-content">
        <!-- Here you can implement actual reviews or a placeholder -->
        <div *ngIf="reviewCount > 0; else noReviews">
          <p>Reviews implementation will be integrated here</p>
        </div>
        <ng-template #noReviews>
          <div class="no-reviews">
            <p>This product has no reviews yet. Be the first to review!</p>
            <button class="add-review-btn">Add a review</button>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<!-- Loading state -->
<div class="loading-description" *ngIf="!productAdditionlInfo()">
  <p>Loading product description...</p>
</div>