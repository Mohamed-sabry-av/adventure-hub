<div class="product-description" *ngIf="productAdditionlInfo()">
  <!-- Tab Navigation -->
  <div class="description-tabs">
    <div class="tab-item"
         [class.active]="activeTab === 'description'"
         (click)="setActiveTab('description')">
      Description
    </div>
    <div class="tab-item"
         [class.active]="activeTab === 'specifications'"
         (click)="setActiveTab('specifications')">
      Specifications
    </div>
  </div>

  <!-- Description Tab Content -->
  <div class="tab-content" *ngIf="activeTab === 'description'">
    <!-- Initial text -->
    <div class="description-section" *ngIf="descriptionSections.length && descriptionSections[0].text">
      <div class="text-content" [innerHTML]="descriptionSections[0].text"></div>
    </div>

    <!-- Image-Text Sections -->
    <div *ngFor="let section of descriptionSections.slice(1)" class="image-text-section" [class.left-align]="section.align === 'left'" [class.right-align]="section.align === 'right'">
      <div class="section-image" *ngIf="section.image">
        <img [src]="section.image" [alt]="section.title || 'Product feature'" loading="lazy">
      </div>
      <div class="section-content">
        <h3 *ngIf="section.title" class="section-title">{{ section.title }}</h3>
        <div class="section-text" *ngIf="section.text" [innerHTML]="section.text"></div>
      </div>
    </div>

    <!-- If no structured content is available, show raw description -->
    <div *ngIf="!descriptionSections.length" class="raw-description" [innerHTML]="productAdditionlInfo().description"></div>
  </div>

  <!-- Specifications Tab Content -->
  <div class="tab-content" *ngIf="activeTab === 'specifications'">
    <div class="specifications-content" *ngIf="productAdditionlInfo().additional_information">
      <table class="specs-table">
        <tbody>
          <tr *ngFor="let item of productAdditionlInfo().additional_information | keyvalue">
            <th>{{ item.key }}</th>
            <td>{{ item.value }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- If no specifications available -->
    <div *ngIf="!productAdditionlInfo().additional_information" class="no-specs">
      <p>No specification information available for this product.</p>
    </div>
  </div>
</div>

<!-- Loading state -->
<div class="loading-description" *ngIf="!productAdditionlInfo()">
  <p>Loading product description...</p>
</div>
