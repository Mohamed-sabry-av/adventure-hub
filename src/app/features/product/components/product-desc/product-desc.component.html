<div class="product-description" *ngIf="productAdditionlInfo">
  <!-- Sticky Navigation -->
  <div class="sticky-tabs">
    <div class="description-tabs">
      <div class="tab-item" [class.active]="activeSection === 'description'" (click)="scrollToSection('description')">
        Description
      </div>
      <div class="tab-item" [class.active]="activeSection === 'additional-info'" (click)="scrollToSection('additional-info')">
        Additional information
      </div>
      <div class="tab-item" [class.active]="activeSection === 'reviews'" (click)="scrollToSection('reviews')">
        Reviews <span class="review-count" *ngIf="reviewCount > 0">{{ reviewCount }}</span>
      </div>
    </div>
  </div>

  <!-- Content Sections -->
  <div class="tab-sections">
    <!-- Description Section -->
    <div id="description" class="content-section">
      <h2 class="section-header">Description</h2>
      <div *ngIf="safeDescription; else noDescription">
        <div class="raw-description" [innerHTML]="safeDescription"></div>
      </div>
      <ng-template #noDescription>
        <p class="no-description">No description available for this product.</p>
      </ng-template>
    </div>

    <!-- Additional Information Section -->
    <div id="additional-info" class="content-section">
      <h2 class="section-header">Additional information</h2>
      <div class="additional-info-content">
        <table class="info-table">
          <tbody>
            <!-- Brand -->
            <tr *ngIf="productAdditionlInfo.brand">
              <th>Brand</th>
              <td>{{ productAdditionlInfo.brand }}</td>
            </tr>

            <!-- Colors -->
            <tr *ngIf="(getAdditionalInfoFromVariations().colors).length > 0">
              <th>Color</th>
              <td class="color-list">
                <span *ngFor="let color of getAdditionalInfoFromVariations().colors; let last = last">
                  {{ color }}{{ !last ? ', ' : '' }}
                </span>
              </td>
            </tr>

            <!-- Sizes -->
            <tr *ngIf="(getAdditionalInfoFromVariations().sizes).length > 0">
              <th>Size</th>
              <td class="size-list">
                <span *ngFor="let size of getAdditionalInfoFromVariations().sizes; let last = last">
                  {{ size }}{{ !last ? ', ' : '' }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- If no additional information available -->
      <div *ngIf="!productAdditionlInfo.brand &&
                 !getAdditionalInfoFromVariations().colors?.length &&
                 !getAdditionalInfoFromVariations().sizes?.length"
        class="no-info">
        <p>No additional information available for this product.</p>
      </div>
    </div>

    <!-- Reviews Section -->
    <div id="reviews" class="content-section">
      <h2 class="section-header">Reviews</h2>
      <div class="reviews-content">
        <div *ngIf="reviewCount > 0; else noReviews">
          <p>Reviews implementation will be integrated here</p>
        </div>
        <ng-template #noReviews>
          <div class="no-reviews">
            <p>This product has no reviews yet. Be the first to review!</p>
            <button class="add-review-btn">Add a review</button>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>

<!-- Loading state -->
<div class="loading-description" *ngIf="!productAdditionlInfo">
  <p>Loading product description...</p>
</div>