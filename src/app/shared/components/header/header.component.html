<!-- Header content - no spacer needed as we're using body padding now -->
<header class="w-full header-container" [ngClass]="{
    'is-scroll': lastScrollY() > 0 && !isProductPage,
    'non-sticky': isProductPage || currentPage === 'checkout'
  }" #headerEl>
  @if (currentPage === 'checkout') {
  <!-- Simplified Checkout Header -->
  <div class="checkout-header flex items-center justify-between px-4 py-3 bg-[#222222]">
    <!-- Empty div for left side spacing -->
    <div class="w-[36px]"></div>

    <!-- Centered logo -->
    <a class="block mx-auto">
      <img src="header/White logo-01.png" alt="Adventures hub logo" routerLink=""
        class="w-[140px] h-7 md:w-[200px] md:h-10 cursor-pointer" loading="lazy" />
    </a>

    <!-- Cart icon on right -->
    <div class="flex items-center">
      <a routerLink="/cart" class="icon-container">
        <i class="pi pi-shopping-bag"></i>
        <span *ngIf="cartCount > 0" class="count-badge">{{ cartCount }}</span>
      </a>
    </div>
  </div>
  } @else if(currentPage !== 'checkout') {
  <!-- Header content wrapper to maintain stable height -->
  <div class="header-content-wrapper">
    <!-- Layer 1: Top Info Banner - Only visible at the top of the page -->
    <div class="header-top-layer" [class.header-layer-hidden]="lastScrollY() > 0" @layerAnimation>
      <div class="top-info-banner">
        <p class="absolute top-0 w-full text-center text-sm animate-slide-first">
          <strong>Free Delivery</strong> for orders over AED 100
        </p>
        <p class="absolute top-0 w-full text-center text-sm animate-slide-second">
          Buy Now & Pay Later with <strong>Tabby</strong>
        </p>
      </div>
    </div>

    <!-- Layer 2: Middle - Logo, Search, Icons (always visible) -->
    <div class="header-middle-layer" [class.header-middle-compact]="lastScrollY() > 10">
      <app-container>
        <div class="py-2 flex items-center justify-between relative">
          <!-- Menu icon and Search icon -->
          <div class="z-10 flex items-center">
            <i class="pi pi-bars" (click)="onSiwtchSideNav(true)"></i>
            <!-- Search icon moved to the left with some margin -->
            <i class="pi pi-search md:hidden block ml-6" (click)="onShowSearchbar()" *ngIf="!showSearchbar()"></i>
            <i class="pi pi-times md:hidden block ml-6" (click)="onShowSearchbar()" *ngIf="showSearchbar()"></i>
          </div>

          <!-- Logo - Centered on mobile -->
          <a class="block absolute left-1/2 transform -translate-x-1/2 md:static md:transform-none">
            <img loading="lazy" src="header/White logo-01.png" alt="Adventures hub logo" routerLink=""
              class="w-[180px] h-9 lg:w-[250px] lg:h-12 cursor-pointer" />
          </a>

          <!-- Search -->
          <div class="flex-1 md:block hidden">
            <app-search-bar />
          </div>

          <!-- Icons - Only show cart icon on mobile, all icons on desktop -->
          <div class="flex items-center justify-end gap-4">
            <!-- User icon - only visible on desktop -->
            <a routerLink="/user" class="icon-container hidden md:block">
              <i class="pi pi-user"></i>
            </a>

            <!-- Wishlist icon - only visible on desktop -->
            <app-wishlist-icon class="hidden md:block"></app-wishlist-icon>

            <!-- Cart icon - always visible -->
            <a routerLink="/cart" class="icon-container">
              <i class="pi pi-shopping-bag"></i>
              <span *ngIf="cartCount > 0" class="count-badge">{{ cartCount }}</span>
            </a>
          </div>
        </div>
        @if (showSearchbar()) {
        <div class="w-full -mt-[5px] md:hidden block z-10 pb-2" @layerAnimation>
          <app-search-bar />
        </div>
        }
      </app-container>
    </div>

    <!-- Layer 3: Bottom - Navbar (using the new thirdLayerVisible signal) -->
    <div class="header-bottom-layer" [class.header-layer-hidden]="!thirdLayerVisible()" @layerAnimation>
      @defer (on idle) {
      <app-navbar-container [mainCategories]="mainCategories" [allCategories]="allCategories" />
      }
    </div>
  </div>
  }
</header>