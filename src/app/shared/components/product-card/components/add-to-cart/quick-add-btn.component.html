<!-- Desktop Add to Cart Button (for products with no variations or only one type of variation) -->
<div *ngIf="!isMobile && shouldShowAddToCartButton()" class="desktop-add-to-cart-container">
  <button
    class="desktop-add-to-cart-btn"
    [disabled]="isAddToCartDisabled()"
    (click)="onAddToCart()">
    Add to Cart
  </button>
</div>
<!-- Desktop Size Selector (for products with only sizes, no colors) -->
<app-size-selector
  *ngIf="shouldShowDesktopSizeSelector()"
  [isHovered]="isHovered"
  [uniqueSizes]="uniqueSizes"
  [selectedSize]="selectedSize"
  (selectSize)="onSelectSize($event)"
></app-size-selector>

<!-- Desktop Combined Color/Size Selector - Shows sizes on hover -->
<app-size-selector
  *ngIf="!isMobile && hasColors() && hasSizes() && isHovered"
  [isHovered]="isHovered"
  [uniqueSizes]="uniqueSizes"
  [selectedSize]="selectedSize"
  (selectSize)="onSelectSize($event)"
></app-size-selector>

<!-- Mobile Quick Add Button (for products with both colors and sizes) -->
<div *ngIf="shouldShowQuickAddButton()" class="mobile-quick-add-section">
  <div class="quick-add-button-container">
    <button
      class="quick-add-button"
      [class.expanded]="mobileQuickAddExpanded"
      (click)="onToggleMobileQuickAdd()">
      Quick Add
      <svg *ngIf="!mobileQuickAddExpanded" class="icon-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
      <svg *ngIf="mobileQuickAddExpanded" class="icon-minus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
    </button>
  </div>
</div>

<!-- Size Selector Overlay for Mobile - Positioned as a dropdown -->
<div *ngIf="mobileQuickAddExpanded" class="mobile-size-selector-overlay">
  <div class="mobile-size-heading">Select Size</div>
  <div class="mobile-size-scroll-container">
    <button
      *ngFor="let size of uniqueSizes"
      class="mobile-size-btn"
      [class.selected]="selectedSize === size.size"
      [class.out-of-stock]="!size.inStock"
      [disabled]="!size.inStock"
      (click)="onSelectSize(size.size)">
      {{ size.size }}
    </button>
  </div>
  <button
    class="mobile-add-to-cart-btn"
    [disabled]="isAddToCartDisabled()"
    (click)="onAddToCart()">
    Add to Cart
  </button>
</div>

<!-- Mobile Add to Cart Button (for products with no variations or only one type) -->
<div *ngIf="isMobile && !shouldShowQuickAddButton() && shouldShowAddToCartButton()" class="mobile-add-to-cart-section">
  <button
    class="mobile-direct-add-btn"
    [disabled]="isAddToCartDisabled()"
    (click)="onAddToCart()">
    Add to Cart
  </button>
</div>