@if(isMobile()){
<p-drawer [visible]="sidenavIsVisible()" position="left" [transitionOptions]="'500ms cubic-bezier(0.4, 0, 0.2, 1)'"
  [modal]="false" styleClass="sidenav-drawer">
  <div class="drawer-header flex justify-between items-center">
    <a class="block">
      <img loading="lazy" src="header/adv-hub-logo-n.png" alt="Adventures hub logo" routerLink="/"
        class="w-[200px] h-10 lg:w-[250px] lg:h-12 cursor-pointer" (click)="onSiwtchSideNav(false)" />
    </a>

    <i class="pi pi-times close-button" (click)="onSiwtchSideNav(false)"></i>
  </div>

  <hr />

  <ul class="flex flex-col">
    @if (categories) {
    <!-- If Of Main-->
    @for (category of categories; track $index) {
    <!-- For Of Main -->
    <div class="drawer-category">
      <div class="flex items-center justify-between pb-3">
        <li class="">
          <a class="drawer-link cursor-pointer text-base md:text-lg font-semibold"
            [routerLink]="getCategoryRoute(category)" (click)="onSiwtchSideNav(false)">
            {{ category.name }}
          </a>
        </li>
        <i class="pi {{
              isCategoryExpanded(category.id) ? 'pi-angle-up drawer-icon-up' : 'pi-angle-down'
            }} drawer-icon cursor-pointer" (click)="toggleCategory(category.id)"></i>
      </div>
      @if (category && isCategoryExpanded(category.id)) {
      <!-- If Of SubCategory -->
      @for (subCategory of getSubCategories(category.id); track subCategory.id)
      {
      <!-- For Of Children Of Main -->
      <div class="flex gap-x-[10px] items-center py-1 mr-3" @slideInOut>
        <a [routerLink]="getCategoryRoute(subCategory)" class="block w-full" (click)="onSiwtchSideNav(false)">
          <span [innerHTML]="subCategory.name" class="haveChilds"></span>
        </a>
        <i class="pi {{
              isCategoryExpanded(subCategory.id) ? 'pi-angle-up drawer-icon-up' : 'pi-angle-down'
            }} drawer-icon cursor-pointer" (click)="toggleCategory(subCategory.id)"></i>
      </div>
      @if (subCategory && isCategoryExpanded(subCategory.id)) {
      <!-- If Of Children Of Children Of Main -->
      @for (subOfSubOfMain of getSubCategories(subCategory.id); track $index) {
      <!-- For Of Children Of Children Of Main -->
      <div class="flex gap-x-[10px] items-center ml-3 py-[1px] mr-6" @slideInOut>
        <a [routerLink]="getCategoryRoute(subOfSubOfMain)" class="block w-full" (click)="onSiwtchSideNav(false)">
          <span [innerHTML]="subOfSubOfMain.name"
            [class]="getSubCategories(subOfSubOfMain.id).length > 0 ? 'haveChilds' : 'notHaveChilds'"></span>
        </a>
        @if (getSubCategories(subOfSubOfMain.id).length > 0) {
        <i class="pi {{
              isCategoryExpanded(subOfSubOfMain.id)
                ? 'pi-angle-up drawer-icon-up'
                : 'pi-angle-down'
            }} drawer-icon cursor-pointer" (click)="toggleCategory(subOfSubOfMain.id)"></i>
        }
      </div>
      @if (subOfSubOfMain && isCategoryExpanded(subOfSubOfMain.id)) {
      <!-- If Of Children Of Children Of Children Of Main -->
      @for (subOfSubOfSubOfMain of getSubCategories(subOfSubOfMain.id); track $index) {
      <!-- for Of Children Of Children Of Children Of Main -->
      <div @slideInOut>
        <a [routerLink]="getCategoryRoute(subOfSubOfSubOfMain)" (click)="onSiwtchSideNav(false)">
          <span [innerHTML]="subOfSubOfSubOfMain.name" class="notHaveChilds"></span>
        </a>
      </div>
      }
      }
      }
      }
      }
      }
    </div>
    }
    }

    <!-- Sales/Deals (moved under categories) -->
    <div class="drawer-section">
      <a routerLink="/sale" class="deals-button-mobile" (click)="onSiwtchSideNav(false)">
        <i class="pi pi-percentage text-sm mr-2"></i>
        <span class="text-white">Deals</span>
      </a>
    </div>

    <!-- Account and Wishlist (moved under Deals) -->
    <div class="drawer-section">
      <h3 class="drawer-section-title">Account</h3>
      <div class="flex flex-col">
        <!-- Account / User - no icon -->
        <a routerLink="/user" class="text-base font-medium" (click)="onSiwtchSideNav(false)">
          My Account
        </a>

        <!-- Wishlist - no icon -->
        <a routerLink="/wishlist" class="text-base font-medium" (click)="onSiwtchSideNav(false)">
          Wishlist
        </a>
      </div>
    </div>
  </ul>
</p-drawer>
}@else { @if (showNavbar()) {
<div class="links-parent" @visible>
  <ul class="links-child bg-[#222222]">
    <div class="flex-grow flex gap-x-4">
      @if (categories) { @for (category of categories; track $index) {
      <li class="links-name" [class.active]="category.id === selectedCategoryId"
        (mouseenter)="selectedCategory(category.id)">
        <a class="py-3 cursor-pointer" [routerLink]="getCategoryRoute(category)">
          {{ category.name }} <i class="pi pi-angle-down"></i>
        </a>
      </li>
      } }
    </div>
    <a routerLink="/sale"
      class="deals-button-desktop text-white font-semibold px-7 py-2 rounded-lg text-base flex items-center gap-2"
      [class]="{ hidden: !showNavbar() }">
      <i class="pi pi-percentage text-sm mr-2"></i>
      <span class="text-base font-bold">Deals</span>
    </a>
  </ul>
</div>
} }